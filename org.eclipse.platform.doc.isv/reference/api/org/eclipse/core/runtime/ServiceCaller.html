<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (11.0.2) on Wed Jun 01 23:03:20 UTC 2022 -->
<title>ServiceCaller (Eclipse Platform API Specification)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2022-06-01">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../jquery/jquery-3.3.1.js"></script>
<script type="text/javascript" src="../../../../jquery/jquery-migrate-3.0.1.js"></script>
<script type="text/javascript" src="../../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="ServiceCaller (Eclipse Platform API Specification)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":9,"i2":9,"i3":10,"i4":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ServiceCaller.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><span style='font-size:small'><b>Eclipse Platform</b><br>2022-06 (4.24)</span></div>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">org.eclipse.core.runtime</a></div>
<h2 title="Class ServiceCaller" class="title">Class ServiceCaller&lt;Service&gt;</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.eclipse.core.runtime.ServiceCaller&lt;Service&gt;</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>Service</code> - the service type for this caller</dd>
</dl>
<hr>
<pre>public class <span class="typeNameLabel">ServiceCaller&lt;Service&gt;</span>
extends <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a></pre>
<div class="block"><code>ServiceCaller</code> provides functional methods for invoking OSGi services
 in two different ways
 <ul>
 <li> Single invocations which happen only once or very rarely. 
 In this case, maintaining a cache of the service is not worth the overhead.</li>
 <li> Multiple invocations that happen often and rapidly. In this case, maintaining
 a cache of the service is worth the overhead.</li>
 </ul>
 <p>
 For single invocations of a service the static method
 <a href="#callOnce(java.lang.Class,java.lang.Class,java.util.function.Consumer)"><code>callOnce(Class, Class, Consumer)</code></a> can be used.
 This method will wrap a call to the consumer of the service with
 the necessary OSGi service registry calls to ensure the service
 exists and will do the proper get and release service operations
 surround the calls to the service. By wrapping a call around the
 service we can ensure that it is correctly released after use.
 </p>
 <p>
 Single invocation example:
 </p>
 <pre>
 ServiceCaller.callOnce(MyClass.class, ILog.class, (logger) -&gt; logger.info("All systems go!"));
 </pre>
 <p>
 Note that it is generally more efficient to use a long-running service
 utility, such as <a href="https://docs.osgi.org/javadoc/osgi.core/8.0.0/org/osgi/util/tracker/ServiceTracker.html?is-external=true" title="class or interface in org.osgi.util.tracker" class="externalLink"><code>ServiceTracker</code></a> or declarative services, but there
 are cases where a single one-shot lookup is preferable, especially if the
 service is not required after use. Examples might include logging unlikely
 conditions or processing debug options that are only read once.
 </p>
 <p>
 This allows boilerplate code to be reduced at call sites, which would
 otherwise have to do something like:
 </p>
 <pre>
 Bundle bundle = FrameworkUtil.getBundle(BadExample.class);
 BundleContext context = bundle == null ? null : bundle.getBundleContext();
 ServiceReference&lt;Service&gt; reference = context == null ? null : context.getServiceReference(serviceType);
 try {
   Service service = reference == null ? null : context.getService(reference);
   if (service != null)
     consumer.accept(service);
 } finally {
   context.ungetService(reference);
 }
 </pre>
 <p>
 For cases where a service is used much more often a <code>ServiceCaller</code> instance
 can be used to cache and track the available service. This may be useful for cases
 that cannot use declarative services and that want to avoid using something like
 a <a href="https://docs.osgi.org/javadoc/osgi.core/8.0.0/org/osgi/util/tracker/ServiceTracker.html?is-external=true" title="class or interface in org.osgi.util.tracker" class="externalLink"><code>ServiceTracker</code></a> that does not easily allow for lazy instantiation of the service
 instance.  For example, if logging is used more often then something like the following
 could be used:
 </p>
 <pre>
 static final ServiceCaller&lt;ILog&gt; log = new ServiceCaller(MyClass.class, ILog.class);
 static void info(String msg) {
   log.call(logger -&gt; logger.info(msg));
 }
 </pre>
 <p>
 Note that this class is intended for simple service usage patterns only.  More advanced cases 
 should use other mechanisms such as the <a href="https://docs.osgi.org/javadoc/osgi.core/8.0.0/org/osgi/util/tracker/ServiceTracker.html?is-external=true" title="class or interface in org.osgi.util.tracker" class="externalLink"><code>ServiceTracker</code></a> or declarative services.
 </p></div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>3.13</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(java.lang.Class,java.lang.Class)">ServiceCaller</a></span>&#8203;(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Class.html?is-external=true" title="class or interface in java.lang" class="externalLink">Class</a>&lt;?&gt;&nbsp;caller,
             <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Class.html?is-external=true" title="class or interface in java.lang" class="externalLink">Class</a>&lt;<a href="ServiceCaller.html" title="type parameter in ServiceCaller">Service</a>&gt;&nbsp;serviceType)</code></th>
<td class="colLast">
<div class="block">Creates a <code>ServiceCaller</code> instance for invoking an OSGi
 service many times with a consumer function.</div>
</td>
</tr>
<tr class="rowColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(java.lang.Class,java.lang.Class,java.lang.String)">ServiceCaller</a></span>&#8203;(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Class.html?is-external=true" title="class or interface in java.lang" class="externalLink">Class</a>&lt;?&gt;&nbsp;caller,
             <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Class.html?is-external=true" title="class or interface in java.lang" class="externalLink">Class</a>&lt;<a href="ServiceCaller.html" title="type parameter in ServiceCaller">Service</a>&gt;&nbsp;serviceType,
             <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;filter)</code></th>
<td class="colLast">
<div class="block">Creates a <code>ServiceCaller</code> instance for invoking an OSGi
 service many times with a consumer function.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#call(java.util.function.Consumer)">call</a></span>&#8203;(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/Consumer.html?is-external=true" title="class or interface in java.util.function" class="externalLink">Consumer</a>&lt;<a href="ServiceCaller.html" title="type parameter in ServiceCaller">Service</a>&gt;&nbsp;consumer)</code></th>
<td class="colLast">
<div class="block">Calls an OSGi service by dynamically looking it up and passing it to the given consumer.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>static &lt;Service&gt;&nbsp;boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#callOnce(java.lang.Class,java.lang.Class,java.lang.String,java.util.function.Consumer)">callOnce</a></span>&#8203;(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Class.html?is-external=true" title="class or interface in java.lang" class="externalLink">Class</a>&lt;?&gt;&nbsp;caller,
        <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Class.html?is-external=true" title="class or interface in java.lang" class="externalLink">Class</a>&lt;Service&gt;&nbsp;serviceType,
        <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;filter,
        <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/Consumer.html?is-external=true" title="class or interface in java.util.function" class="externalLink">Consumer</a>&lt;Service&gt;&nbsp;consumer)</code></th>
<td class="colLast">
<div class="block">As <a href="#callOnce(java.lang.Class,java.lang.Class,java.util.function.Consumer)"><code>callOnce(Class, Class, Consumer)</code></a> with an additional OSGi filter.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>static &lt;Service&gt;&nbsp;boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#callOnce(java.lang.Class,java.lang.Class,java.util.function.Consumer)">callOnce</a></span>&#8203;(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Class.html?is-external=true" title="class or interface in java.lang" class="externalLink">Class</a>&lt;?&gt;&nbsp;caller,
        <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Class.html?is-external=true" title="class or interface in java.lang" class="externalLink">Class</a>&lt;Service&gt;&nbsp;serviceType,
        <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/Consumer.html?is-external=true" title="class or interface in java.util.function" class="externalLink">Consumer</a>&lt;Service&gt;&nbsp;consumer)</code></th>
<td class="colLast">
<div class="block">Calls an OSGi service by dynamically looking it up and passing it to the given consumer.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html?is-external=true" title="class or interface in java.util" class="externalLink">Optional</a>&lt;<a href="ServiceCaller.html" title="type parameter in ServiceCaller">Service</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#current()">current</a></span>()</code></th>
<td class="colLast">
<div class="block">Return the currently available service.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#unget()">unget</a></span>()</code></th>
<td class="colLast">
<div class="block">Releases the cached service object, if it exists.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang" class="externalLink">clone</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang" class="externalLink">equals</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang" class="externalLink">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang" class="externalLink">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang" class="externalLink">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang" class="externalLink">notify</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang" class="externalLink">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang" class="externalLink">toString</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang" class="externalLink">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang" class="externalLink">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html?is-external=true#wait(long,int)" title="class or interface in java.lang" class="externalLink">wait</a></code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a id="&lt;init&gt;(java.lang.Class,java.lang.Class)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ServiceCaller</h4>
<pre>public&nbsp;ServiceCaller&#8203;(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Class.html?is-external=true" title="class or interface in java.lang" class="externalLink">Class</a>&lt;?&gt;&nbsp;caller,
                     <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Class.html?is-external=true" title="class or interface in java.lang" class="externalLink">Class</a>&lt;<a href="ServiceCaller.html" title="type parameter in ServiceCaller">Service</a>&gt;&nbsp;serviceType)</pre>
<div class="block">Creates a <code>ServiceCaller</code> instance for invoking an OSGi
 service many times with a consumer function.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>caller</code> - a class from the bundle that will consume the service</dd>
<dd><code>serviceType</code> - the OSGi service type to look up</dd>
</dl>
</li>
</ul>
<a id="&lt;init&gt;(java.lang.Class,java.lang.Class,java.lang.String)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ServiceCaller</h4>
<pre>public&nbsp;ServiceCaller&#8203;(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Class.html?is-external=true" title="class or interface in java.lang" class="externalLink">Class</a>&lt;?&gt;&nbsp;caller,
                     <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Class.html?is-external=true" title="class or interface in java.lang" class="externalLink">Class</a>&lt;<a href="ServiceCaller.html" title="type parameter in ServiceCaller">Service</a>&gt;&nbsp;serviceType,
                     <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;filter)</pre>
<div class="block">Creates a <code>ServiceCaller</code> instance for invoking an OSGi
 service many times with a consumer function.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>caller</code> - a class from the bundle that will consume the service</dd>
<dd><code>serviceType</code> - the OSGi service type to look up</dd>
<dd><code>filter</code> - the service filter used to look up the service.  May be <code>null</code>.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="callOnce(java.lang.Class,java.lang.Class,java.util.function.Consumer)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>callOnce</h4>
<pre class="methodSignature">public static&nbsp;&lt;Service&gt;&nbsp;boolean&nbsp;callOnce&#8203;(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Class.html?is-external=true" title="class or interface in java.lang" class="externalLink">Class</a>&lt;?&gt;&nbsp;caller,
                                         <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Class.html?is-external=true" title="class or interface in java.lang" class="externalLink">Class</a>&lt;Service&gt;&nbsp;serviceType,
                                         <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/Consumer.html?is-external=true" title="class or interface in java.util.function" class="externalLink">Consumer</a>&lt;Service&gt;&nbsp;consumer)</pre>
<div class="block">Calls an OSGi service by dynamically looking it up and passing it to the given consumer.
 <p>
 If not running under OSGi, the caller bundle is not active or the service is not available, return false.
 If the service is found, call the service and return true.
 </p>
 <p>
 Any runtime exception thrown by the consumer is rethrown by this method.
 If the consumer throws a checked exception, it can be propagated using a <em>sneakyThrow</em>
 inside a try/catch block:
 </p>
 <pre>
 callOnce(MyClass.class, Callable.class, (callable) -&gt; {
   try {
     callable.call();
   } catch (Exception e) {
     sneakyThrow(e);
   }
 });
 ...
 @SuppressWarnings("unchecked")
 static &lt;E extends Throwable&gt; void sneakyThrow(Throwable e) throws E {
   throw (E) e;
 }
 </pre></div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>Service</code> - the OSGi service type to look up</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>caller</code> - a class from the bundle that will use service</dd>
<dd><code>serviceType</code> - the OSGi service type to look up</dd>
<dd><code>consumer</code> - the consumer of the OSGi service</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the OSGi service was located and called successfully, false otherwise</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/NullPointerException.html?is-external=true" title="class or interface in java.lang" class="externalLink">NullPointerException</a></code> - if any of the parameters are null</dd>
</dl>
</li>
</ul>
<a id="callOnce(java.lang.Class,java.lang.Class,java.lang.String,java.util.function.Consumer)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>callOnce</h4>
<pre class="methodSignature">public static&nbsp;&lt;Service&gt;&nbsp;boolean&nbsp;callOnce&#8203;(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Class.html?is-external=true" title="class or interface in java.lang" class="externalLink">Class</a>&lt;?&gt;&nbsp;caller,
                                         <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Class.html?is-external=true" title="class or interface in java.lang" class="externalLink">Class</a>&lt;Service&gt;&nbsp;serviceType,
                                         <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;filter,
                                         <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/Consumer.html?is-external=true" title="class or interface in java.util.function" class="externalLink">Consumer</a>&lt;Service&gt;&nbsp;consumer)</pre>
<div class="block">As <a href="#callOnce(java.lang.Class,java.lang.Class,java.util.function.Consumer)"><code>callOnce(Class, Class, Consumer)</code></a> with an additional OSGi filter.</div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>Service</code> - the OSGi service type to look up</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>caller</code> - a class from the bundle that will use service</dd>
<dd><code>serviceType</code> - the OSGi service type to look up</dd>
<dd><code>consumer</code> - the consumer of the OSGi service</dd>
<dd><code>filter</code> - an OSGi filter to restrict the services found</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the OSGi service was located and called successfully, false otherwise</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/NullPointerException.html?is-external=true" title="class or interface in java.lang" class="externalLink">NullPointerException</a></code> - if any of the parameters are null</dd>
</dl>
</li>
</ul>
<a id="call(java.util.function.Consumer)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>call</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;call&#8203;(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/Consumer.html?is-external=true" title="class or interface in java.util.function" class="externalLink">Consumer</a>&lt;<a href="ServiceCaller.html" title="type parameter in ServiceCaller">Service</a>&gt;&nbsp;consumer)</pre>
<div class="block">Calls an OSGi service by dynamically looking it up and passing it to the given consumer.
 If not running under OSGi, the caller bundle is not active or the service is not available, return false.
 Any runtime exception thrown by the consumer is rethrown by this method.
 (For handling checked exceptions, see <a href="#callOnce(java.lang.Class,java.lang.Class,java.util.function.Consumer)"><code>callOnce(Class, Class, Consumer)</code></a> for a solution.)
 Subsequent calls to this method will attempt to reuse the previously acquired service instance until one
 of the following occurs:
 <ul>
 <li>The <a href="#unget()"><code>unget()</code></a> method is called.</li>
 <li>The service is unregistered.</li>
 <li>The service properties change such that this <code>ServiceCaller</code> filter no longer matches.
 <li>The caller bundle is stopped.</li>
 <li>The service rankings have changed.</li>
 </ul>
 
 After one of these conditions occur subsequent calls to this method will try to acquire the
 another service instance.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>consumer</code> - the consumer of the OSGi service</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the OSGi service was located and called successfully, false otherwise</dd>
</dl>
</li>
</ul>
<a id="current()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>current</h4>
<pre class="methodSignature">public&nbsp;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html?is-external=true" title="class or interface in java.util" class="externalLink">Optional</a>&lt;<a href="ServiceCaller.html" title="type parameter in ServiceCaller">Service</a>&gt;&nbsp;current()</pre>
<div class="block">Return the currently available service.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the currently available service or empty if the service cannot be found.</dd>
</dl>
</li>
</ul>
<a id="unget()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>unget</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;unget()</pre>
<div class="block">Releases the cached service object, if it exists.
 Another invocation of <a href="#call(java.util.function.Consumer)"><code>call(Consumer)</code></a> will
 lazily get the service instance again and cache the new
 instance if found.</div>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ServiceCaller.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><span style='font-size:small'><b>Eclipse Platform</b><br>2022-06 (4.24)</span></div>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small><br><span style='font-size:small;float:right'>Copyright (c) 2000, 2022 Eclipse Contributors and others. All rights reserved.</span><span style='font-size:small'><a href='../../../../../misc/api-usage-rules.html'>Guidelines for using Eclipse APIs.</a></span></small></p>
</footer>
</body>
</html>
